<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>GeomapVis</title>

  <!-- css -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  <link href="css/nivo-lightbox.css" rel="stylesheet" />
  <link href="css/nivo-lightbox-theme/default/default.css" rel="stylesheet" type="text/css" />
  <link href="css/animations.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet">
  <link href="color/default.css" rel="stylesheet">

  <!--header for geomap-->
  <meta charset=utf-8 />
  <title>GeomapVis</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>


    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.1.3/dist/esri-leaflet.js"
    integrity="sha512-pijLQd2FbV/7+Jwa86Mk3ACxnasfIMzJRrIlVQsuPKPCfUBCDMDUoLiBQRg7dAQY6D1rkmCcR8286hVTn/wlIg=="
    crossorigin=""></script>


  <style>
    body { margin:0; padding:0; }
    #map { position: absolute; top:0; bottom:0; right:0; left:0; }

    /* css to customize Leaflet default styles  */
    .custom .leaflet-popup-tip,
    .custom .leaflet-popup-content-wrapper {
        background: #ffffff;
        color: #ffffff;
        width:auto !important;
        height: auto !important;
    }

    /*Customize popup image style.(not in use)*/
    .popupImage {
        max-width: 20%;
        max-height: 20%;
    }
    .leaflet-popup-content {
        width:auto !important;
    }

  </style>
</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-custom">

  <section class="hero" id="intro">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-right navicon">
          <a id="nav-toggle" class="nav_slide_button" href="#"><span></span></a>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8 col-md-offset-2 text-center inner">
          <div class="animatedParent">
            <h1 class="animated fadeInDown">GEOMAP&nbsp;VIS</h1>
            <p class="animated fadeInUp">Visualization services<br> for clustering local photo updates based on geographical location.</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 col-md-offset-3 text-center">
          <a href="#maps" class="learn-more-btn btn-scroll">Learn more</a>
        </div>
      </div>
    </div>
  </section>


  <!-- Navigation -->
  <div id="navigation">
    <nav class="navbar navbar-custom" role="navigation">
      <div class="container">
        <div class="row">
          <div class="col-md-2">
            <div class="site-logo">
              <a href="index.html" class="brand_new">GEOMAPVIS</a>
            </div>
          </div>


          <div class="col-md-10">

            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu">
                                                <i class="fa fa-bars"></i>
                                                </button>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="menu">
              <ul class="nav navbar-nav navbar-right">
                <li class="active"><a href="#intro">Home</a></li>
                <li><a href="#maps">Map</a></li>
                <li><a href="#design">Design</a></li>
                <li><a href="#footer">Contact</a></li>
              </ul>
            </div>
            <!-- /.Navbar-collapse -->

          </div>
        </div>
      </div>
      <!-- /.container -->
    </nav>
  </div>
  <!-- /Navigation -->


  <!-- Section: maps -->
  <section id="maps" class="home-section nopadd-bot color-dark bg-gray text-center">
    <div class="container marginbot-50">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="animatedParent">
            <div class="section-heading text-center">
              <h2 class="h-bold animated bounceInDown">A geographical Visualization Map
              </h2>
              <div class="divider-header"></div>
            </div>
          </div>
        </div>
        <a href="#service" class="btn btn-skin btn-scroll">Tech Design</a>
      </div>

    </div>
    <br></br>
    <br></br>
    <br></br>
    <br></br>

    <div class="container class="map-section">

      <div class="row marginbot-50">
        <div class="row">
        <br></br>
        <br></br>
        <br></br>
        <br></br>
        <br></br>
        <br></br>
      

      <!-- map scripts -->
      <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.Default.css">
      <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.css">
      <script src="https://unpkg.com/leaflet.markercluster@1.0.4/dist/leaflet.markercluster.js"></script>

      <!-- Load Clustered Feature Layer from CDN -->
      <script src="https://unpkg.com/esri-leaflet-cluster@2.0.0"></script>

      <div id="map" style=" margin-top: 200px;"></div>

      <script>
        var map = L.map('map').setView([45.526, -122.667], 15); 

        L.esri.basemapLayer('Streets').addTo(map);

        //  (new constructor syntax at 2.0.0)
        var trees = L.esri.Cluster.featureLayer({
          url: 'https://services.arcgis.com/rOo16HdIMeOBI4Mb/arcgis/rest/services/Trimet_Transit_Stops/FeatureServer/0'
        }).addTo(map);

        // // Image Service added.
        // L.esri.imageMapLayer({
        //     url: 'https://landsat.arcgis.com/arcgis/rest/services/Landsat/PS/ImageServer',
        //     attribution: 'United States Geological Survey (USGS), National Aeronautics and Space Administration (NASA)'
        //   }).addTo(map);

      //   L.polygon([
      //  [45.526, -122.667],
      //  [45, -122.66],
      //  [45.5, -122.6],
      //  [45.52, -122]
      // ]).addTo(map).bindPopup("故宫");　

      /*
        //Show popups on map
        var popup = L.popup();

        var photoImg = '<img src="https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/1.png?alt=media&token=e7836e50-a6bd-40db-89d0-d4e7b73919a0" height="150px" maxWidth: "auto"/>';

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("<center>My Photo </center>" + "</br>"+ photoImg)
                .openOn(map);
        }
        map.on('click', onMapClick);
      */

          //Another option
          var photoIcon = L.icon({
              iconUrl: 'https://unpkg.com/leaflet@1.3.1/dist/images/marker-icon.png',
              iconSize: [26, 41], // size of the icon
              popupAnchor: [0,-15]
          });
          // create popup contents
          var imgsource = 'https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/1.png?alt=media&token=e7836e50-a6bd-40db-89d0-d4e7b73919a0';
          // var customPopup = new Array(15);

          function randomImg() {
              var r = getRandomIntInclusive();
              switch(r) {
                case 0:
                    return customPopup0;
                    break;
                case 1:
                    return customPopup1;
                    break;
                case 2:
                    return customPopup2;
                    break;
                case 3:
                    return customPopup3;
                    break;
                case 4:
                    return customPopup4;
                    break;
                case 5:
                    return customPopup5;
                    break;
                case 6:
                    return customPopup6;
                    break;
                case 7:
                    return customPopup7;
                    break;
                case 8:
                    return customPopup8;
                    break;
                case 9:
                    return customPopup9;
                    break;
                case 10:
                    return customPopup10;
                    break;
                case 11:
                    return customPopup11;
                    break;
                case 12:
                    return customPopup12;
                    break;
                case 13:
                    return customPopup13;
                    break;
                case 14:
                    return customPopup14;
                    break;
                default:
                    return customPopup6;
              }
              // return imgSuffixes[r]
          }

          function getRandomIntInclusive() {
            var min = 0, max =14;
            var result = Math.floor(Math.random() * (max - min + 1)) + min;
            console.log(result);
            return result;
          }

          var customPopup0 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/1.png?alt=media&token=e7836e50-a6bd-40db-89d0-d4e7b73919a0' 'width': '50','height': '50'/>";
          var customPopup1 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/2.png?alt=media&token=4013c584-2555-49f0-bacf-aa7d5d62f1bd' 'width': '50','height': '50'/>";
          var customPopup2 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/3.png?alt=media&token=9341ea02-1038-4d67-b87d-0d8a12238ff2' 'width': '50','height': '50'/>";
          var customPopup3 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/4.png?alt=media&token=9276e25a-d6d0-4598-bbbf-69317706c46c' 'width': '50','height': '50'/>";
          var customPopup4 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/5.png?alt=media&token=d881d777-970d-4f72-8472-4b8bcc1e23a4' 'width': '50','height': '50'/>";
          var customPopup5 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/6.png?alt=media&token=bf8acb77-9f55-4320-b826-0243726bc92c' 'width': '50','height': '50'/>";
          var customPopup6 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/7.png?alt=media&token=7de8848c-9c88-4f85-a747-4e050e13d718' 'width': '50','height': '50'/>";
          var customPopup7 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/8.png?alt=media&token=a4b82c4b-418b-4934-97be-62695d8e0e70' 'width': '50','height': '50'/>";
          var customPopup8 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/9.png?alt=media&token=679a468f-5fd2-4489-ab8f-7983932c934b' 'width': '50','height': '50'/>";
          var customPopup9 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/10.png?alt=media&token=e2798eec-6dce-4e87-a035-cb4201543dc8' 'width': '50','height': '50'/>";
          var customPopup10 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/11.png?alt=media&token=2ecaf0b0-2488-4f2f-8c8f-44882ed00e90' 'width': '50','height': '50'/>";
          var customPopup11 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/12.png?alt=media&token=23792444-6028-47e5-9dda-106cd95a8d9f' 'width': '50','height': '50'/>";
          var customPopup12 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/13.png?alt=media&token=a3a96f9b-42a9-45d7-8549-cc4b3d53ac54' 'width': '50','height': '50'/>";
          var customPopup13 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/14.png?alt=media&token=41c03a81-5f11-4f3d-907d-ceb647e3ee53' 'width': '50','height': '50'/>";
          var customPopup14 = "Local images<br/><img src='https://firebasestorage.googleapis.com/v0/b/geomapvis.appspot.com/o/15.png?alt=media&token=c446fdfb-d44e-49d8-99a0-11b3733e941f' 'width': '50','height': '50'/>";


          // specify popup options 
          var customOptions =
              {
              // 'maxWidth': '50',
              // 'maxHeight': '50',
              'className' : 'custom'
              }
          
          // create marker object, pass custom icon as option, pass content and options to popup, add to map
          L.marker([45.526, -122.667], {icon: photoIcon}).bindPopup(randomImg(),customOptions).addTo(map);

        //   trees.bindPopup(function (layer) {
        //   return L.Util.template('<p>{COMMON_NAM}<br>{SCIENTIFIC}<br>{NOTES}</p>', layer.feature.properties);
        // });

          // trees.bindPopup(function (layer) {
          //     return L.Util.template('<p>{COMMON_NAM}<br>{SCIENTIFIC}<br>{NOTES}</p>', layer.feature.properties);
          // });
          trees.bindPopup(randomImg(),customOptions);
          function onMapClick(e) {
              // randomImg();
              trees.bindPopup(randomImg(),customOptions);
          }
          map.on('click', onMapClick);
          trees.on('click', onMapClick);

        </script>

        </div>
      </section>
      <!-- /Section: maps -->
      </div>
      </div>



  <!-- Section: design -->
  <section id="design" class="home-section color-dark bg-gray">
    <div class="container marginbot-50">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          <div>
            <div class="section-heading text-center">
              <h2 class="h-bold">Framework Design</h2>
              <div class="divider-header"></div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="text-center">
      <div class="container">

        <div class="row animatedParent">
          <div class="col-md-4">
            <div class="animated rotateInDownLeft">
              <div class="service-box">
                <div class="service-icon">
                  <span class="fa fa-laptop fa-2x"></span>
                </div>
                <div class="service-desc">
                  <h5>Bootstrap</h5>
                  <div class="divider-header"></div>
                  <p>
                    An extensible front end framework with navigation and animation.
                  </p>
                  <a href="https://getbootstrap.com/" class="btn btn-skin">Learn more</a>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="animated rotateInDownLeft slow">
              <div class="service-box">
                <div class="service-icon">
                  <span class="fa fa-map-marker fa-2x"></span>
                </div>
                <div class="service-desc">
                  <h5>Leaflet</h5>
                  <div class="divider-header"></div>
                  <p>
                    An open-source JavaScript library for mobile-friendly interactive maps.
                  </p>
                  <a href="http://leafletjs.com/" class="btn btn-skin">Learn more</a>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="animated rotateInDownLeft slower">
              <div class="service-box">
                <div class="service-icon">
                  <span class="fa fa-code fa-2x"></span>
                </div>
                <div class="service-desc">
                  <h5>Firebase</h5>
                  <div class="divider-header"></div>
                  <p>
                    A mobile and web application development platform providing cloud storage for images.
                  </p>
                  <a href="https://firebase.google.com/" class="btn btn-skin">Learn more</a>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
  <!-- /Section: design -->

  <footer>
  	<section id="footer">
	    <div class="container">
	      <div class="row">
	        <div class="col-md-6">
	          <ul class="footer-menu">
	            <li><a href="#">Home</a></li>
	          </ul>
	        </div>
	        <div class="col-md-6 text-right copyright">
	          Author: &nbsp;Qiaofei Ye &nbsp; ye210@purdue.edu<br>
	          An enthusiastic doer never stops learning.
	          <div class="credits">
	            <!--
	              All the links in the footer should remain intact.
	              You can delete the links only if you purchased the pro version.
	              Licensing information: https://bootstrapmade.com/license/
	              Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Bocor
	            -->
	          </div>
	        </div>
	      </div>
	    </div>
  </footer>

  <!-- Core JavaScript Files -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.sticky.js"></script>
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/jquery.scrollTo.js"></script>
  <script src="js/jquery.appear.js"></script>
  <script src="js/stellar.js"></script>
  <script src="js/nivo-lightbox.min.js"></script>

  <script src="js/custom.js"></script>
  <script src="js/css3-animate-it.js"></script>
  <script src="contactform/contactform.js"></script>

</body>
</html>
