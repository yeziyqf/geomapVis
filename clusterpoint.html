<html>
<head>
  <meta charset=utf-8 />
  <title>GeomapVis</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>


    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@2.1.3/dist/esri-leaflet.js"
    integrity="sha512-pijLQd2FbV/7+Jwa86Mk3ACxnasfIMzJRrIlVQsuPKPCfUBCDMDUoLiBQRg7dAQY6D1rkmCcR8286hVTn/wlIg=="
    crossorigin=""></script>


  <style>
    body { margin:0; padding:0; }
    #map { position: absolute; top:0; bottom:0; right:0; left:0; }

    /* css to customize Leaflet default styles  */
    .custom .leaflet-popup-tip,
    .custom .leaflet-popup-content-wrapper {
        background: #ffffff;
        color: #ffffff;
        width:auto !important;
        height: auto !important;
    }

    /*Customize popup image style.(not in use)*/
    .popupImage {
        max-width: 20%;
        max-height: 20%;
    }
    .leaflet-popup-content {
        width:auto !important;
    }

  </style>
</head>
<body>

<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.Default.css">
<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.4/dist/MarkerCluster.css">
<script src="https://unpkg.com/leaflet.markercluster@1.0.4/dist/leaflet.markercluster.js"></script>

<!-- Load Clustered Feature Layer from CDN -->
<script src="https://unpkg.com/esri-leaflet-cluster@2.0.0"></script>

<div id="map"></div>

<script>
  var map = L.map('map').setView([45.526, -122.667], 15); 

  L.esri.basemapLayer('Streets').addTo(map);

  //  (new constructor syntax at 2.0.0)
  L.esri.Cluster.featureLayer({
    url: 'https://services.arcgis.com/rOo16HdIMeOBI4Mb/arcgis/rest/services/Trimet_Transit_Stops/FeatureServer/0'
  }).addTo(map);

  // // Image Service added.
  // L.esri.imageMapLayer({
  //     url: 'https://landsat.arcgis.com/arcgis/rest/services/Landsat/PS/ImageServer',
  //     attribution: 'United States Geological Survey (USGS), National Aeronautics and Space Administration (NASA)'
  //   }).addTo(map);

//   L.polygon([
//  [45.526, -122.667],
//  [45, -122.66],
//  [45.5, -122.6],
//  [45.52, -122]
// ]).addTo(map).bindPopup("故宫");　


  var popup = L.popup();

  var photoImg = '<img src="https://unpkg.com/leaflet@1.3.1/dist/images/marker-icon.png" height="150px" maxWidth: "auto"/>';

  //Show popups on map
  // function onMapClick(e) {
  //     popup
  //         .setLatLng(e.latlng)
  //         .setContent("<center>My Photo </center>" + "</br>"+ photoImg)
  //         .openOn(map);
  // }
  // map.on('click', onMapClick);

    //Another option
    var photoIcon = L.icon({
        iconUrl: 'https://unpkg.com/leaflet@1.3.1/dist/images/marker-icon.png',
        iconSize: [26, 41], // size of the icon
        popupAnchor: [0,-15]
    });
    // create popup contents
    var customPopup = "Local images<br/><img src='http://www.go-study.com.tw/upload/citytown/201702061554071.png' 'width': '50','height': '50'/>";
    
    // specify popup options 
    var customOptions =
        {
        'maxWidth': '50',
        'maxHeight': '50',
        'className' : 'custom'
        }
    
    // create marker object, pass custom icon as option, pass content and options to popup, add to map
    L.marker([45.526, -122.667], {icon: photoIcon}).bindPopup(customPopup,customOptions).addTo(map);

</script>

</body>
</html>